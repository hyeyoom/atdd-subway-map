# 1. 인수테스트

## 1. 지하철 노선에 역 추가

우선 미션의 제약 조건에 대해 정리한다.  

- 출발역 per 노선
- 단방향
- 두 갈래로 갈라지는 역은 없음
    - 헬도림 -> 까치산, 헬도림 -> 합정 방향 같은게 없다는 뜻인 듯 ㅇㅅㅇ
    - 팩트: 신도림은 지옥임 (~~반박 시 악마~~)
- 당연하지만 노선엔 순서가 존재함
    - A - B - D 에서 C역 추가
    - A - B - C - D C가 B, D 사이에 오고 당연히 전, 후 역 모두 업데이트 되겠지!

미션 수행 순서 (가급적 맞춰서 해보자)

- LineStationAddAcceptanceTest의 노선 역 등록 기능을 추가해봄
- 노선 조회 시 등록된 역도 함께 응답 되도록 수정
    - step0에서 진행한 LineAcceptanceTest 부분 수정 필요
- 마지막 역 다음에 추가되는 케이스에 대한 기능 구현
- 중간 역 다음에 추가되는 케이스에 대한 기능 구현

엔티티 설계 고민

- 현재는 Line, Station만 존재함.  
- `@ManyToMany`는 선생님도 사용하지 않기를 권하셨고 실무에서도 가급적 안쓰는게 권장되니 'ㅅ'
- 지하철역(Station)은 여러개의 지하철 노선(Line)에 포함될 수 있다.  
    - 강남역: 2호선, 신분당선
- 제약조건을 제외하고 생각해보면
    - 역(Station)은 여러 노선(Line)을 가질 수 있다.  
    - 노선은 여러 역을 가질 수 있다.  
    - 다대다 관계라고 볼 수 있다.  
    - 다대다 설정 시 늘어나는 고민
        - 이 역의 다음 역은 무엇이냐고 물었을 때 처리 방법. 컥.  
- 힌트
    - Line <-> Station (X)
    - Line -> LineStation -> Stations
    - 이렇게 하면 노선에 포함된 역들을 LineStations에 조회 가능
    - 역은 역 간 관계, 노선에 대한 정보를 알 필요가 없어짐